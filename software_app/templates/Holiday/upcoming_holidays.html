{% extends 'base2.html' %}
{% load static %}

{% block title %}Upcoming Holidays{% endblock %}

{% block content %}
<div class="ribbon-header d-flex justify-content-between align-items-center px-4 pb-5 mb-3" style="color: black">
  <div class="d-flex align-items-center">
    <i class="fas fa-calendar-week me-3 fs-2" style="color: #0152a4;"></i>
    <div class="fw-bold fs-3">Upcoming Holidays</div>
  </div>
  <div class="breadcrumb-text text-end">
    <span class="text-black"><i class="fas fa-home me-1"></i>HOME</span>
    <span class="mx-2 text-black">/</span>
    <span class="text-black-50">Upcoming Holidays</span>
  </div>
</div>

<div class="container-fluid mt-2">
  <div class="card shadow-lg mb-4 modern-card">
    <div class="card-header table-title-bar d-flex justify-content-between align-items-center">
      <span class="fw-bold text-white"><i class="fas fa-calendar-check me-2"></i>Next 3 Months Holidays</span>
      <span class="badge bg-light text-dark">{{ holidays|length }} Holiday{% if holidays|length != 1 %}s{% endif %}</span>
    </div>
    <div class="card-body p-4">
      {% if holidays %}
      <!-- Holiday Cards -->
      <div class="row g-4">
        {% for holiday in holidays %}
        <div class="col-md-6 col-lg-4">
          <div class="holiday-card">
            <div class="holiday-card-header">
              {% if holiday.holiday_type == 'festival' %}
              <div class="holiday-icon festival-icon">
                <i class="fas fa-star fa-2x"></i>
              </div>
              {% elif holiday.holiday_type == 'national' %}
              <div class="holiday-icon national-icon">
                <i class="fas fa-flag fa-2x"></i>
              </div>
              {% else %}
              <div class="holiday-icon other-icon">
                <i class="fas fa-calendar-day fa-2x"></i>
              </div>
              {% endif %}
            </div>
            <div class="holiday-card-body">
              <h5 class="holiday-name">{{ holiday.holiday_name }}</h5>
              <div class="holiday-date">
                <i class="fas fa-calendar-alt me-2"></i>
                <strong>{{ holiday.holiday_date|date:"l, d F Y" }}</strong>
              </div>
              <div class="holiday-type mt-2">
                {% if holiday.holiday_type == 'festival' %}
                <span class="badge modern-badge badge-festival">
                  <i class="fas fa-star me-1" style="font-size: 8px;"></i>Festival
                </span>
                {% elif holiday.holiday_type == 'national' %}
                <span class="badge modern-badge badge-national">
                  <i class="fas fa-flag me-1" style="font-size: 8px;"></i>National Holiday
                </span>
                {% else %}
                <span class="badge modern-badge badge-other">
                  <i class="fas fa-circle me-1" style="font-size: 8px;"></i>Other
                </span>
                {% endif %}
              </div>
              {% if holiday.description %}
              <div class="holiday-description mt-3">
                <p class="text-muted mb-0">{{ holiday.description }}</p>
              </div>
              {% endif %}
              <div class="days-remaining mt-3">
                <i class="fas fa-hourglass-half me-2 text-primary"></i>
                <span id="days-{{ forloop.counter }}"></span>
              </div>
            </div>
          </div>
        </div>
        
        <script>
          (function() {
            const holidayDate = new Date('{{ holiday.holiday_date|date:"Y-m-d" }}');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            holidayDate.setHours(0, 0, 0, 0);
            
            const diffTime = holidayDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            const element = document.getElementById('days-{{ forloop.counter }}');
            if (diffDays === 0) {
              element.innerHTML = '<strong class="text-success">Today!</strong>';
            } else if (diffDays === 1) {
              element.innerHTML = '<strong class="text-warning">Tomorrow</strong>';
            } else if (diffDays > 1) {
              element.innerHTML = `<strong>${diffDays} days remaining</strong>`;
            } else {
              element.innerHTML = '<strong class="text-muted">Past</strong>';
            }
          })();
        </script>
        {% endfor %}
      </div>
      {% else %}
      <!-- No Holidays -->
      <div class="text-center text-muted py-5">
        <i class="fas fa-calendar-times fa-4x mb-3"></i>
        <h4>No Upcoming Holidays</h4>
        <p>There are no holidays scheduled in the next 3 months.</p>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<style>
  .modern-card {
    border-radius: 15px;
    border: none;
    overflow: hidden;
  }

  .ribbon-header {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }

  .holiday-card {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 3px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .holiday-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }

  .holiday-card-header {
    padding: 20px;
    text-align: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  }

  .holiday-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
  }

  .festival-icon {
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
  }

  .national-icon {
    background: linear-gradient(135deg, #28a745 0%, #34ce57 100%);
  }

  .other-icon {
    background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
  }

  .holiday-card-body {
    padding: 20px;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .holiday-name {
    font-size: 20px;
    font-weight: 700;
    color: #333;
    margin-bottom: 15px;
  }

  .holiday-date {
    color: #0152a4;
    font-size: 14px;
    padding: 10px;
    background: #f8f9ff;
    border-radius: 8px;
    border-left: 4px solid #0152a4;
  }

  .holiday-description {
    font-size: 14px;
    color: #666;
    line-height: 1.6;
  }

  .days-remaining {
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid #e9ecef;
    font-size: 14px;
  }

  .modern-badge {
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 12px;
    display: inline-flex;
    align-items: center;
  }

  .badge-festival {
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
    color: white;
  }

  .badge-national {
    background: linear-gradient(135deg, #28a745 0%, #34ce57 100%);
    color: white;
  }

  .badge-other {
    background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
    color: white;
  }

  .card-header.table-title-bar {
    padding: 20px;
    font-size: 18px;
    border-bottom: 3px solid rgba(255,255,255,0.2);
  }
</style>
{% endblock %}